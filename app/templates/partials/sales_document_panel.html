{% from 'components/ui.html' import card, flash %}

{% call card('Documento (Factura / Presupuesto)', id='sales-doc-panel', extra_class='mt-16') %}
  <p class="muted mt-n6">Arma un carrito temporal y luego emite el documento. (Precios sin IVA)</p>

  {% set draft = draft if draft is defined and draft else {} %}

  {{ flash(message, message_class or '', none) }}

  {% if issued_doc %}
    <div class="mt-10 flex gap-10 flex-wrap items-center">
      <a href="/ui/sales-doc/{{ issued_doc.id }}/pdf?download=1" target="_blank" rel="noopener">Descargar PDF</a>
      <a href="/ui/sales-doc/{{ issued_doc.id }}/pdf" target="_blank" rel="noopener">Abrir / Imprimir</a>
    </div>
  {% endif %}

  <div class="sales-doc-grid mt-12">
    {% include 'components/sales_doc/cart_add.html' %}
    {% include 'components/sales_doc/issue_form.html' %}
  </div>

  {% include 'components/sales_doc/cart_table.html' %}

  {% include 'components/sales_doc/recent_documents.html' %}
{% endcall %}
