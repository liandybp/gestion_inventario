<table>
  <thead>
    <tr>
      <th>Img</th>
      <th>SKU</th>
      <th>Nombre</th>
      <th>Unidad</th>
      <th>Categoría</th>
      <th>Stock mín.</th>
      <th>Costo def.</th>
      <th>Precio def.</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for p in products %}
      <tr>
        <td>
          {% if p.image_url %}
            <img src="{{ p.image_url }}" alt="" style="width:36px;height:36px;object-fit:cover;border-radius:8px;border:1px solid #e5e7eb;" />
          {% endif %}
        </td>
        <td>{{ p.sku }}</td>
        <td>{{ p.name }}</td>
        <td>{{ p.unit_of_measure or '' }}</td>
        <td>{{ p.category or '' }}</td>
        <td>{{ '%.0f'|format(p.min_stock or 0) }}</td>
        <td>{{ '%.2f'|format(p.default_purchase_cost or 0) }}</td>
        <td>{{ '%.2f'|format(p.default_sale_price or 0) }}</td>
        <td>
          <button type="button"
                  hx-get="/ui/product/{{ p.sku }}/edit"
                  hx-target="#product-edit"
                  hx-swap="innerHTML">Edit</button>

          <button type="button" style="margin-left:8px;background: var(--brand-red);"
                  hx-post="/ui/product/{{ p.sku }}/delete"
                  hx-target="#product-panel"
                  hx-swap="outerHTML"
                  hx-confirm="¿Eliminar el producto {{ p.sku }}?">Del</button>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
