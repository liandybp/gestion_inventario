<div>
  {% from 'components/ui.html' import card, flash, row %}
  <h2>Clientes</h2>
  <p class="muted">Gestiona clientes y revisa su historial de compras para personalizar ofertas.</p>

  {{ flash(message, message_class or '', message_detail) }}

  <div class="grid grid-2">
    {% call card('Buscar') %}
      <form hx-get="/ui/customers/table" hx-target="#customers-table" hx-swap="innerHTML">
        {% call row('Nombre o ID') %}<input name="query" value="{{ query or '' }}" />{% endcall %}
        <button type="submit">Buscar</button>
      </form>
    {% endcall %}

    {% call card('Nuevo cliente') %}
      <form hx-post="/ui/customer/create" hx-target="#tab-content" hx-swap="innerHTML">
        {% call row('ID cliente') %}<input name="client_id" required />{% endcall %}
        {% call row('Nombre') %}<input name="name" required />{% endcall %}
        {% call row('Dirección (opcional)') %}<input name="address" />{% endcall %}
        {% call row('Teléfono (opcional)') %}<input name="phone" />{% endcall %}
        {% call row('Email (opcional)') %}<input name="email" />{% endcall %}
        <button type="submit">Guardar</button>
      </form>
    {% endcall %}
  </div>

  <div id="customer-detail" class="mt-12"></div>
  <div id="customer-edit" class="mt-12"></div>

  <div id="customers-table" class="mt-12">
    {% include 'partials/customers_table.html' %}
  </div>
</div>
