<div>
  <h2>Inicio</h2>
  <p class="muted">Resumen general (lo iremos ampliando paso a paso).</p>

  <div class="grid" style="grid-template-columns: 1fr 1fr 1fr;">
    <div class="card">
      <div class="muted">Productos</div>
      <div style="font-size:22px;font-weight:700;">{{ totals.products }}</div>
    </div>
    <div class="card">
      <div class="muted">Stock total</div>
      <div style="font-size:22px;font-weight:700;">{{ '%.0f'|format(totals.stock_total or 0) }}</div>
    </div>
    <div class="card">
      <div class="muted">Por reponer</div>
      <div style="font-size:22px;font-weight:700;">{{ totals.to_restock }}</div>
    </div>
  </div>

  <div class="card" style="margin-top:16px;" id="restock"
       hx-get="/ui/restock-table" hx-trigger="load, every 5s" hx-swap="innerHTML">
  </div>

  <div class="card" style="margin-top:16px;">
    <h3>Resumen mensual</h3>
    <p class="muted">Ventas, compras y utilidad bruta por mes (Ãºltimos 12 meses).</p>
    <canvas id="monthly-chart" height="120"
            data-labels="{{ monthly|map(attribute='month')|list|tojson }}"
            data-sales="{{ monthly|map(attribute='sales')|list|tojson }}"
            data-purchases="{{ monthly|map(attribute='purchases')|list|tojson }}"
            data-profit="{{ monthly|map(attribute='gross_profit')|list|tojson }}"></canvas>
  </div>

  <script>
    if(window.renderMonthlyChart){ window.renderMonthlyChart(document); }
  </script>
</div>
