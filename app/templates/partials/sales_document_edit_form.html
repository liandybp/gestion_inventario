<div class="card" style="margin-top:12px;" id="sales-doc-edit-form">
  <div style="display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap;">
    <h4 style="margin:0;">Editar documento <code>{{ doc.code }}</code></h4>
    <button type="button" style="background:#6b7280;" hx-on:click="document.getElementById('sales-doc-edit').innerHTML=''">Cerrar</button>
  </div>

  <form hx-post="/ui/sales-doc/{{ doc.id }}/update" hx-target="#sales-doc-panel" hx-swap="outerHTML" style="margin-top:12px;">
    <div class="grid" style="grid-template-columns: 1fr 1fr;">
      <div class="row"><label>Cliente (Nombre)</label><input name="client_name" value="{{ doc.client_name }}" required /></div>
      <div class="row"><label>Cliente (ID)</label><input name="client_id" value="{{ doc.client_id }}" required /></div>
    </div>
    <div class="row"><label>Direcci칩n (opcional)</label><input name="client_address" value="{{ doc.client_address or '' }}" /></div>
    <div class="row"><label>Notas (opcional)</label><input name="notes" value="{{ doc.notes or '' }}" /></div>

    <h4 style="margin-top:14px;">Items</h4>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Descripci칩n</th>
          <th style="text-align:right;">Cant.</th>
          <th style="text-align:right;">Precio</th>
          <th style="text-align:right;">Eliminar</th>
        </tr>
      </thead>
      <tbody>
        {% for it in items %}
          <tr>
            <td>{{ it.line_no }}</td>
            <td><input name="desc_{{ it.id }}" value="{{ it.description }}" /></td>
            <td style="text-align:right;"><input name="qty_{{ it.id }}" type="number" step="0.0001" min="0" value="{{ it.quantity }}" /></td>
            <td style="text-align:right;"><input name="price_{{ it.id }}" type="number" step="0.0001" min="0" value="{{ it.unit_price }}" /></td>
            <td style="text-align:right;"><input name="del_{{ it.id }}" type="checkbox" /></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <h4 style="margin-top:14px;">A침adir item</h4>
    <div class="grid" style="grid-template-columns: 2fr 1fr 1fr;">
      <div class="row"><label>Descripci칩n</label><input name="new_desc" /></div>
      <div class="row"><label>Cantidad</label><input name="new_qty" type="number" step="0.0001" min="0" value="1" /></div>
      <div class="row"><label>Precio</label><input name="new_price" type="number" step="0.0001" min="0" value="0" /></div>
    </div>

    <button type="submit" style="margin-top:12px;">Guardar cambios</button>
  </form>
</div>
